{
  "name": "Energy Monitoring Dashboard Ali Tariq",
  "description": "Real-time energy generation and consumption monitoring with comprehensive configuration options",
  "version": "1.0.0",
  "influx": {
    "bucket": "iot-bucket-gfe",
    "org": "GFE-DB"
  },
  "query": "from(bucket: \"{{bucket}}\")\n  |> range(start: {{start}}, stop: {{stop}})\n  |> filter(fn: (r) => r[\"_measurement\"] == \"power_mix\")\n  |> filter(fn: (r) => r[\"_field\"] == \"W_Load\" or r[\"_field\"] == \"W_Gen\" or r[\"_field\"] == \"W_Grid\" or r[\"_field\"] == \"W_PV\")\n  |> filter(fn: (r) => r[\"controller_id\"] == \"{{controllerId}}\")\n  |> filter(fn: (r) => exists r._value)\n  |> sort(columns: [\"_time\"], desc: true)\n  |> yield(name: \"energy_data\")",
  "parameters": {
    "start": "-24h",
    "stop": "now()",
    "controllerId": "CTRL-1A64BCC039E8D677872A6A73E31ADFE1098432BE49B3AC4159FD21A909EF61EA"
  },
  "panel": {
    "title": "Energy Monitoring Dashboard",
    "description": "Monitor power generation, consumption, and grid interactions",
    "backgroundColor": "#ffffff",
    "borderColor": "#e0e0e0",
    "borderWidth": 1,
    "borderRadius": 8,
    "transparent": false
  },
  "refresh": {
    "enabled": true,
    "interval": 5000
  },
  "chart": {
    "showZeroValues": true,
    "zeroLineVisible": true,
    "zeroLineColor": "#ccc",
    "zeroLineWidth": 1,
    "dragMode": "pan",
    "selectDirection": "diagonal"
  },
  "tooltip": {
    "hoverMode": "closest",
    "hoverProximity": 20,
    "spikeDistance": 1000,
    "spikeColor": "#000000",
    "spikeThickness": 1,
    "spikeMode": "across",
    "showSpikes": false,
    "backgroundColor": "rgba(255, 255, 255, 0.95)",
    "borderColor": "#ccc",
    "fontColor": "#333",
    "fontSize": 13,
    "fontFamily": "Arial, sans-serif",
    "nameLength": 0,
    "align": "left"
  },
  "axes": {
    "x": {
      "type": "time",
      "title": "Time",
      "hoverFormat": "%Y-%m-%d %H:%M",
      "gridLines": true,
      "showGrid": true,
      "gridColor": "#e0e0e0",
      "gridWidth": 1,
      "showZeroLine": false,
      "zeroLineColor": "#ccc",
      "zeroLineWidth": 1,
      "show": true,
      "timeZone": "auto",
      "showBorder": true,
      "lineWidth": 1,
      "color": "text",
      "tickMode": "auto",
      "nTicks": 10,
      "showTickLabels": true,
      "tickAngle": 0,
      "tickFontSize": 12,
      "tickFontColor": "#333",
      "titleFontSize": 14,
      "titleFontColor": "#333",
      "rangeSlider": false,
      "rangeSelector": false,
      "fixedRange": false
    },
    "y": [
      {
        "title": "Power (W)",
        "unit": "watts",
        "min": -150000,
        "max": 150000,
        "softMin": -150000,
        "softMax": 150000,
        "gridLines": true,
        "showGrid": true,
        "gridColor": "#e0e0e0",
        "gridWidth": 1,
        "show": true,
        "side": "left",
        "scale": "linear",
        "centeredZero": true,
        "zeroline": true,
        "zerolinecolor": "#ccc",
        "zerolinewidth": 1,
        "showBorder": true,
        "lineWidth": 1,
        "color": "text",
        "width": "auto",
        "tickMode": "auto",
        "nTicks": 10,
        "showTickLabels": true,
        "tickAngle": 0,
        "tickFontSize": 12,
        "tickFontColor": "#333",
        "titleFontSize": 14,
        "titleFontColor": "#333",
        "fixedRange": false
      }
    ]
  },
  "series": [
    {
      "name": "PV Generation",
      "type": "line",
      "yAxis": 0,
      "color": "#f39c12",
      "lineWidth": 3,
      "lineStyle": "solid",
      "lineInterpolation": "linear",
      "markerSize": 6,
      "markerStyle": "circle",
      "markerLineWidth": 2,
      "markerLineColor": "#f39c12",
      "fill": "none",
      "fillOpacity": 0.3,
      "gradientMode": "none",
      "dataField": "W_PV",
      "unit": "W",
      "showPoints": "auto",
      "pointSize": 4,
      "connectNullValues": "never",
      "showZeroValues": true,
      "disconnectValues": "never",
      "stackSeries": "off",
      "barAlignment": "center",
      "barWidthFactor": 0.8,
      "displayName": "Active PV Generation",
      "decimals": 0,
      "noValue": "-"
    },
    {
      "name": "Load Consumption",
      "type": "line",
      "yAxis": 0,
      "color": "#000000",
      "lineWidth": 3,
      "lineStyle": "solid",
      "lineInterpolation": "linear",
      "markerSize": 6,
      "markerStyle": "circle",
      "markerLineWidth": 2,
      "markerLineColor": "#e74c3c",
      "fill": "none",
      "fillOpacity": 0.3,
      "gradientMode": "none",
      "dataField": "W_Load",
      "unit": "W",
      "showPoints": "auto",
      "pointSize": 4,
      "connectNullValues": "never",
      "showZeroValues": true,
      "disconnectValues": "never",
      "stackSeries": "off",
      "barAlignment": "center",
      "barWidthFactor": 0.8,
      "displayName": "Load Consumption",
      "decimals": 0,
      "noValue": "-"
    },
    {
      "name": "Grid Import/Export",
      "type": "line",
      "yAxis": 0,
      "color": "#3498db",
      "lineWidth": 3,
      "lineStyle": "solid",
      "lineInterpolation": "linear",
      "markerSize": 6,
      "markerStyle": "circle",
      "markerLineWidth": 2,
      "markerLineColor": "#3498db",
      "fill": "none",
      "fillOpacity": 0.3,
      "gradientMode": "none",
      "dataField": "W_Grid",
      "unit": "W",
      "showPoints": "auto",
      "pointSize": 4,
      "connectNullValues": "never",
      "showZeroValues": true,
      "disconnectValues": "never",
      "stackSeries": "off",
      "barAlignment": "center",
      "barWidthFactor": 0.8,
      "displayName": "Grid Power",
      "decimals": 0,
      "noValue": "-"
    },
    {
      "name": "Generator",
      "type": "line",
      "yAxis": 0,
      "color": "#2ecc71",
      "lineWidth": 3,
      "lineStyle": "solid",
      "lineInterpolation": "linear",
      "markerSize": 6,
      "markerStyle": "circle",
      "markerLineWidth": 2,
      "markerLineColor": "#2ecc71",
      "fill": "none",
      "fillOpacity": 0.3,
      "gradientMode": "none",
      "dataField": "W_Gen",
      "unit": "W",
      "showPoints": "auto",
      "pointSize": 4,
      "connectNullValues": "never",
      "showZeroValues": true,
      "disconnectValues": "never",
      "stackSeries": "off",
      "barAlignment": "center",
      "barWidthFactor": 0.8,
      "displayName": "Generator",
      "decimals": 0,
      "noValue": "-"
    }
  ],
  "tooltip": {
    "enabled": true,
    "mode": "all",
    "sortOrder": "asc",
    "hideZeros": false,
    "hoverProximity": 20,
    "maxWidth": 400,
    "maxHeight": 600,
    "format": "HH:mm:ss",
    "showValues": true,
    "showUnits": true,
    "shared": true,
    "hoverinfo": "x+y+text",
    "hovertemplate": "<b>%{fullData.name}</b><br>Time: %{x}<br>Power: %{y:,.0f} W<br><extra></extra>"
  },
  "legend": {
    "enabled": true,
    "mode": "list",
    "placement": "top",
    "width": 200,
    "values": ["last", "max", "min", "mean"],
    "showAsTable": false,
    "hideEmpty": false,
    "hideZero": false
  },
  "graphStyles": {
    "style": "lines",
    "lineInterpolation": "linear",
    "lineWidth": 3,
    "fillOpacity": 0.3,
    "gradientMode": "none",
    "lineStyle": "solid",
    "connectNullValues": "never",
    "disconnectValues": "never",
    "showPoints": "auto",
    "pointSize": 4,
    "stackSeries": "off",
    "barAlignment": "center",
    "barWidthFactor": 0.8
  },
  "standardOptions": {
    "unit": "watts",
    "min": 0,
    "max": 300000,
    "fieldMinMax": true,
    "decimals": 0,
    "displayName": "Energy Data",
    "colorScheme": "single",
    "noValue": "-"
  },
  "valueMappings": [
    {
      "type": "value",
      "value": 0,
      "displayText": "No Power",
      "color": "#95a5a6"
    },
    {
      "type": "range",
      "from": 200000,
      "to": 300000,
      "displayText": "High Power",
      "color": "#e74c3c"
    }
  ],
  "dataLinks": [
    {
      "title": "View Details",
      "url": "/energy-details",
      "openInNewTab": true,
      "oneClick": false
    }
  ],
  "actions": [
    {
      "title": "Send Alert",
      "confirmationMessage": "Send power alert to operators?",
      "method": "POST",
      "url": "/api/alerts",
      "variables": [
        {
          "key": "power_level",
          "name": "Power Level",
          "type": "number"
        }
      ],
      "queryParameters": [
        {
          "key": "type",
          "value": "power_alert"
        }
      ],
      "headers": [
        {
          "key": "Content-Type",
          "value": "application/json"
        }
      ],
      "contentType": "application/json",
      "body": "{\"power_level\": $power_level, \"timestamp\": \"$__time\"}"
    }
  ],
  "zoom": {
    "enabled": true,
    "type": "x"
  },
  "pan": {
    "enabled": true,
    "type": "x"
  },
  "annotations": []
}